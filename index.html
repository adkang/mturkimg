<html>
	<head>
		<script src="text/javascript"></script>
		<script src="mturk.js"></script>
		<script>
		var numclicks = 0;
		var numclicks2 = 0;
		var numclicks3 = 0;
		var numclicks4 = 0;
		var numclicks5 = 0;
		var numclicks6 = 0;
		var numclicks7 = 0;
    		var keydowns = 0;
		var keydowns2 = 0;
		var keydowns3 = 0;
		var keydowns4 = 0;
		var keydowns5 = 0;
		var keydowns6 = 0;
		var keydowns7 = 0;

      		var addedelements = [];

    		$(document).ready(function() {
			
			$("#image1").click(function(e) {
          			numclicks++;
				console.log(e)
          		$("#numberofpeople1").text(numclicks);
          		$("#numberofpeoplefield1").val(numclicks);
	
	       		var newdomelement = $("<div class='marker'></div>");
	          	newdomelement.css("left", (e.pageX-3) + "px");
        	  	newdomelement.css("top", (e.pageY-3) + "px");

	          	var currhistory = $("#history").val();
        	  	currhistory += "|" + e.pageX + "," + e.pageY + "|";
          		$("#history").val(currhistory);

	          	newdomelement.click(removeElementEvent);

        	  	$("body").append(newdomelement);

          		// add to history
          		addedelements.push(newdomelement);
    				})
			
			$("#image2").click(function(e) {
          			numclicks2++;
				console.log(e)
          		$("#numberofpeople2").text(numclicks2);
          		$("#numberofpeoplefield2").val(numclicks2);
				
			var newdomelement = $("<div class='marker'></div>");
	          	newdomelement.css("left", (e.pageX-3) + "px");
        	  	newdomelement.css("top", (e.pageY-3) + "px");

	          	var currhistory = $("#history").val();
        	  	currhistory += "|" + e.pageX + "," + e.pageY + "|";
          		$("#history").val(currhistory);

	          	newdomelement.click(removeElementEvent);

        	  	$("body").append(newdomelement);

          		// add to history
          		addedelements.push(newdomelement);
    				})
				
    			$("#image3").click(function(e) {
          			numclicks3++;
				console.log(e)
          		$("#numberofpeople3").text(numclicks3);
          		$("#numberofpeoplefield3").val(numclicks3);
			
			var newdomelement = $("<div class='marker'></div>");
	          	newdomelement.css("left", (e.pageX-3) + "px");
        	  	newdomelement.css("top", (e.pageY-3) + "px");

	          	var currhistory = $("#history").val();
        	  	currhistory += "|" + e.pageX + "," + e.pageY + "|";
          		$("#history").val(currhistory);

	          	newdomelement.click(removeElementEvent);

        	  	$("body").append(newdomelement);

          		// add to history
          		addedelements.push(newdomelement);
    				})
			
			$("#image4").click(function(e) {
          			numclicks4++;
				console.log(e)
          		$("#numberofpeople4").text(numclicks4);
          		$("#numberofpeoplefield4").val(numclicks4);
			
			var newdomelement = $("<div class='marker'></div>");
	          	newdomelement.css("left", (e.pageX-3) + "px");
        	  	newdomelement.css("top", (e.pageY-3) + "px");

	          	var currhistory = $("#history").val();
        	  	currhistory += "|" + e.pageX + "," + e.pageY + "|";
          		$("#history").val(currhistory);

	          	newdomelement.click(removeElementEvent);

        	  	$("body").append(newdomelement);

          		// add to history
          		addedelements.push(newdomelement);
    				})
				
			$("#image5").click(function(e) {
          			numclicks5++;
				console.log(e)
          		$("#numberofpeople5").text(numclicks5);
          		$("#numberofpeoplefield5").val(numclicks5);
				
			var newdomelement = $("<div class='marker'></div>");
	          	newdomelement.css("left", (e.pageX-3) + "px");
        	  	newdomelement.css("top", (e.pageY-3) + "px");

	          	var currhistory = $("#history").val();
        	  	currhistory += "|" + e.pageX + "," + e.pageY + "|";
          		$("#history").val(currhistory);

	          	newdomelement.click(removeElementEvent);

        	  	$("body").append(newdomelement);

          		// add to history
          		addedelements.push(newdomelement);
    				})
				
			$("#image6").click(function(e) {
          			numclicks6++;
				console.log(e)
          		$("#numberofpeople6").text(numclicks6);
          		$("#numberofpeoplefield6").val(numclicks6);
				
			var newdomelement = $("<div class='marker'></div>");
	          	newdomelement.css("left", (e.pageX-3) + "px");
        	  	newdomelement.css("top", (e.pageY-3) + "px");

	          	var currhistory = $("#history").val();
        	  	currhistory += "|" + e.pageX + "," + e.pageY + "|";
          		$("#history").val(currhistory);

	          	newdomelement.click(removeElementEvent);

        	  	$("body").append(newdomelement);

          		// add to history
          		addedelements.push(newdomelement);
    				})
			
			$("#image7").click(function(e) {
          			numclicks7++;
				console.log(e)
          		$("#numberofpeople7").text(numclicks7);
          		$("#numberofpeoplefield7").val(numclicks7);
			
			var newdomelement = $("<div class='marker'></div>");
	          	newdomelement.css("left", (e.pageX-3) + "px");
        	  	newdomelement.css("top", (e.pageY-3) + "px");

	          	var currhistory = $("#history").val();
        	  	currhistory += "|" + e.pageX + "," + e.pageY + "|";
          		$("#history").val(currhistory);

	          	newdomelement.click(removeElementEvent);

        	  	$("body").append(newdomelement);

          		// add to history
          		addedelements.push(newdomelement);
    				})
			
    				$(document).keydown(function(e) {
    					keydowns++;
    					$("#numkeydowns").val(keydowns);
	
       		   	console.log(e);

          		if(e.key=="z" && e.ctrlKey) {
          	  		var elem2remove = addedelements.pop();
          	  		removeElement(elem2remove);
          		}
    				})
    		})
	
      		function removeElement(elem) {
        		$(elem).remove();

        		numclicks--;
        		$("#numberofpeople").text(numclicks);
        		$("#numberofpeoplefield").val(numclicks);       
      		}

      		function removeElementEvent(e) {
        		removeElement(this);
      		}
    
		</script>
	<style>	
    		.marker {
    		  border: 2px solid red;
   	 	  border-radius: 5px;
   	 	  width: 2px;
    		  height: 2px;
   	 	  position: absolute;
    		  left: 0px;
    		  top: 0px;
   	 	}
	</style>
	</head>
	<body>
		<h1>How many recognizable people are in each image? Please look at each image carefully.</h1>
		
		<p>Example 1: 5 people<br><img src="example1.jpg" alt="#1" width=512></p>
		
		<p>Example 2: 6 people<br><img src="example2.jpg" alt="#2" width=512></p>
		
		<p>Example 3: 3 people<br><img src="example3.jpeg" alt="#2" width=512></p>
    
		<form id="mturk_form">
		<p>#1<br><img id="image1" src="people1.jpg" alt="#1" width=512></p>
		<p><span id="numberofpeople1">0</span> people found</p>
			<p>
				<input id="numclickfield1" type="hidden" name="numclicks1">
				<input id="numkeydowns1" type="hidden" name="keydowns1">
				<input id="numberofpoeplefield1" type="hidden" name="numberofpeople1">
			</p>
		<p>#2<br><img id="image2" src="people2.jpg" alt="#2" width=512></p>
		<p><span id="numberofpeople2">0</span> people found</p>
			<p>
				<input id="numclickfield2" type="hidden" name="numclicks2">
				<input id="numkeydowns2" type="hidden" name="keydowns2">
				<input id="numberofpoeplefield2" type="hidden" name="numberofpeople2">
			</p>
		<p>#3<br><img id="image3" src="people3.jpg" alt="#3" width=512></p>
		<p><span id="numberofpeople3">0</span> people found</p>
			<p>
				<input id="numclickfield3" type="hidden" name="numclicks3">
				<input id="numkeydowns3" type="hidden" name="keydowns3">
				<input id="numberofpoeplefield3" type="hidden" name="numberofpeople3">
			</p>
		<p>#4<br><img id="image4" src="people4.jpg" alt="#4" width=512></p>
		<p><span id="numberofpeople4">0</span> people found</p>
			<p>
				<input id="numclickfield4" type="hidden" name="numclicks4">
				<input id="numkeydowns4" type="hidden" name="keydowns4">
				<input id="numberofpoeplefield4" type="hidden" name="numberofpeople4">
			</p>
		<p>#5<br><img id="image5" src="people5.png" alt="#5" width=512></p>
		<p><span id="numberofpeople5">0</span> people found</p>
			<p>
				<input id="numclickfield5" type="hidden" name="numclicks5">
				<input id="numkeydowns5" type="hidden" name="keydowns5">
				<input id="numberofpoeplefield5" type="hidden" name="numberofpeople5">
			</p>
		<p>#6<br><img id="image6" src="people6.jpg" alt="#6" width=512></p>
		<p><span id="numberofpeople6">0</span> people found</p>
			<p>
				<input id="numclickfield6" type="hidden" name="numclicks6">
				<input id="numkeydowns6" type="hidden" name="keydowns6">
				<input id="numberofpoeplefield6" type="hidden" name="numberofpeople6">
			</p>

		<p>#7<br><img id="image7" src="people7.jpg" alt="#7" width=512></p>
		<p><span id="numberofpeople7">0</span> people found</p>
			<p>
				<input id="numclickfield7" type="hidden" name="numclicks7">
				<input id="numkeydowns7" type="hidden" name="keydowns7">
				<input id="numberofpoeplefield7" type="hidden" name="numberofpeople7">
			</p>
		<br>
		<input type="submit" name="Submit">
		</form>
	</body>
</html>
